srcdir = @srcdir@
abs_builddir = @abs_builddir@
abs_srcdir = @abs_srcdir@

INSTALL	= @INSTALL@

DISTFILES = 	setup.py 	\
		Makefile.in	\
		PKG-INFO	\
		README		\
		missingos.c	\
		setup.cfg	\
		ChangeLog	

all: builddir
	setup.py build

builddir:
	test "${abs_builddir}" != "${abs_srcdir}" \
	&& for x in $(DISTFILES) \
	 ; do $(INSTALL) ${abs_srcdir}/$${x} ${abs_builddir}/$${x} \
	 ; done

clean-builddir:
	if test "${abs_builddir}" != "${abs_srcdir}" \
	 ; then for x in $(DISTFILES) \
	      ; do rm -f ${abs_builddir}/$${x} \
	      ; done \
	 ; fi

install: builddir
	setup.py install --root $(DESTDIR)/

distdir:
	for x in $(DISTFILES); do \
		$(INSTALL) -D ${srcdir}/$${x} $(distdir)/$${x}; \
	done
	chmod 755 $(distdir)/setup.py

distclean: clean-builddir

clean maintainer-clean:
.PHONY:	all install distdir builddir
.PHONY: distclean clean maintainer-clean clean-builddir

